# Task-8: Exploring GCC Optimizations

This section highlights the difference in assembly generated by using different optimization flags during compilation.

---

## Code to Analyze

```c
int main() {
    printf("Hello, RISCV!");
    return 0;
}
```

---

## Compilation Using `-O0` (No Optimization) and `-O2` (High Optimization)

```bash
riscv32-unknown-elf-gcc -O0 -S hello.c -o hello_O0.s
riscv32-unknown-elf-gcc -O2 -S hello.c -o hello_O2.s
```

![O0 and O2 optimization compilation](/Week%201/assets/Task-8/o0_o2_compilation.png)

---

## Assembly Differences

### `-O0`: No Optimization

- Full call to `printf` preserved
- Stack frames and return values handled explicitly
- Intermediate values stored in memory

This version is easier to debug but slower and larger.

![O0 assembly](/Week%201/assets/Task-8/O0.png)

---

### `-O2`: High Optimization

- Function calls may be inlined if small (though `printf()` typically isnâ€™t)
- Stack setup might be eliminated if unnecessary
- Constants embedded directly
- Redundant loads/stores removed

![O2 assembly](/Week%201/assets/Task-8/O2.png)

---

## Conclusion

On bare-metal or constrained systems:

- `-O2` gives much better performance and size
- `-O0` is useful only for debugging